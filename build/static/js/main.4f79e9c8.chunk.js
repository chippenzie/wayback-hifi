(this["webpackJsonpwayback-hifi"]=this["webpackJsonpwayback-hifi"]||[]).push([[0],{13:function(e,t,r){},14:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),i=r(8),s=r.n(i),l=(r(13),r(3)),c=r(4),o=r(2),u=r(6),d=r(5),f=(r(14),r(0));function h(e){var t=Object.keys(e.values).sort().map((function(t){return Object(f.jsxs)("option",{value:t,children:[t," (",e.values[t]," streams)"]},t)}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:e.id,children:e.label}),Object(f.jsxs)("select",{id:e.id,onChange:e.filterFn,children:[Object(f.jsx)("option",{value:"",children:"Choose one"}),t]})]})}var j=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).state={filters:{station:null,location:null,decade:null,genre:null}},a.filterByStation=a.filterByStation.bind(Object(o.a)(a)),a.filterByLocation=a.filterByLocation.bind(Object(o.a)(a)),a.filterByDecade=a.filterByDecade.bind(Object(o.a)(a)),a.filterByGenre=a.filterByGenre.bind(Object(o.a)(a)),a}return Object(c.a)(r,[{key:"filterByStation",value:function(e){var t=this.state.filters;t.station=e.target.value,this.setState({filters:t})}},{key:"filterByLocation",value:function(e){var t=this.state.filters;t.location=e.target.value,this.setState({filters:t})}},{key:"filterByDecade",value:function(e){var t=this.state.filters;t.decade=e.target.value,this.setState({filters:t})}},{key:"filterByGenre",value:function(e){var t=this.state.filters;t.genre=e.target.value,this.setState({filters:t})}},{key:"render",value:function(){var e=this,t={},r={},a={},n={},i=this.state.filters,s="ppp";return this.props.streams.length&&function(){for(var l=0;l<e.props.streams.length;l++){var c=e.props.streams[l];t[c.station]?t[c.station]++:t[c.station]=1,r[c.location]?r[c.location]++:r[c.location]=1,a[c.decade]?a[c.decade]++:a[c.decade]=1,n[c.genre]?n[c.genre]++:n[c.genre]=1}var o=["station","location","decade","genre"],u=!1;s=e.props.streams;for(var d=function(e){i[o[e]]&&(u=!0,s=s.map((function(t){if(t&&t.url&&t[o[e]]===i[o[e]])return t})))},h=0;h<o.length;h++)d(h);s=u?s.map((function(e){if(e&&e.url){var t=e.title?e.title:e.station+" "+e.location+" "+e.airdate;return Object(f.jsx)("option",{value:e.url,children:t},e.url)}return null})):[]}(),Object(f.jsxs)("div",{children:[Object(f.jsx)(h,{id:"station",label:"Station",values:t,filterFn:this.filterByStation}),Object(f.jsx)(h,{id:"location",label:"Locations",values:r,filterFn:this.filterByLocation}),Object(f.jsx)(h,{id:"decades",label:"Decade",values:a,filterFn:this.filterByDecade}),Object(f.jsx)(h,{id:"genres",label:"Genre",values:n,filterFn:this.filterByGenre}),Object(f.jsx)("label",{htmlFor:"streamDropdown",children:"Streams"}),Object(f.jsx)("select",{id:"streamDropdown",children:s}),Object(f.jsx)("button",{onClick:function(){return e.props.play()},children:" Play "})]})}}]),r}(n.a.Component),b=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).state={streams:[],currentStream:null},a.playStream=a.playStream.bind(Object(o.a)(a)),a}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=this;fetch("/wayback-hifi/build/data/streams.json").then((function(e){if(e.ok)return e.json();throw e})).then((function(t){e.setState({streams:t.streams.sort((function(e,t){return e.airdate>t.airdate?1:-1}))})}))}},{key:"getStreamByUrl",value:function(e){for(var t=this.state.streams,r=0;r<t.length;r++)if(t[r].url===e)return t[r]}},{key:"playStream",value:function(){var e=document.querySelector("#streamDropdown").value,t=this.getStreamByUrl(e);this.setState({currentStream:t}),console.log("play called",e,t,new Date)}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"radio",children:["radio radio",Object(f.jsx)(j,{streams:this.state.streams,play:this.playStream}),Object(f.jsx)(v,{stream:this.state.currentStream})]})}}]),r}(n.a.Component),v=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props.stream||{},t="",r="";if(e.url){var a=e.url+"&autoplay=1";t=Object(f.jsx)("iframe",{src:a,title:"radioPlayer",width:"500",height:"210",frameBorder:"0"}),r=Object(f.jsx)("a",{href:e.url,children:"view on archive.org"})}return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:t}),Object(f.jsx)("div",{children:r})]})}}]),r}(n.a.Component);var p=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(b,{})})})},y=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,17)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),i(e),s(e)}))};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(p,{})}),document.getElementById("root")),y()}},[[16,1,2]]]);
//# sourceMappingURL=main.4f79e9c8.chunk.js.map